# Тест интеграции shop-ytb-client с car-api

## Что было сделано:

### 1. Обновлены типы данных
- Создан новый интерфейс `ICar` для работы с новой структурой CarEntity
- Обновлен интерфейс `IBoilerPart` для обратной совместимости
- Добавлены интерфейсы `IFile` и `IAdmin`

### 2. Создан маппер данных
- Файл `utils/carMapper.ts` содержит функции для преобразования данных
- `mapCarToBoilerPart()` - преобразует ICar в IBoilerPart
- `mapCarsToBoilerParts()` - преобразует массив ICar в массив IBoilerPart
- `createBoilerPartsFromCars()` - создает объект IBoilerParts из массива ICar

### 3. Обновлены API вызовы
- Все URL изменены с `/boiler-parts` на `/cars`
- Обновлены endpoints:
  - `/cars` - получение всех автомобилей
  - `/cars/car/{id}` - получение автомобиля по ID
  - `/cars/search` - поиск автомобилей
- Добавлена автоматическая обработка данных в новом формате

### 4. Обновлены компоненты
- Добавлена обработка отсутствующих изображений
- Компоненты используют старые поля через маппинг

## Маппинг полей:

| Старое поле (IBoilerPart) | Новое поле (CarEntity) | Примечание |
|---------------------------|------------------------|------------|
| `Drive` | `drive` | Прямое маппинг |
| `Transmission` | `gearbox` | Прямое маппинг |
| `Engine` | `engine` | Преобразование в строку |
| `Mileage` | `mileage` | Преобразование в строку |
| `Year` | `year` | Преобразование в строку |
| `Model` | `model` | Прямое маппинг |
| `boiler_manufacturer` | `brand` | Прямое маппинг |
| `vendor_code` | `vin` | Прямое маппинг |
| `name` | `${brand} ${model}` | Конкатенация |
| `images` | `files[].path` | Массив путей к файлам |
| `in_stock` | `!deletedAt` | Проверка на удаление |

## Для тестирования:

1. Убедитесь, что car-api запущен
2. Проверьте, что NEXT_PUBLIC_SERVER_URL указывает на car-api
3. Откройте главную страницу - должны загружаться автомобили
4. Откройте каталог - должны отображаться все автомобили
5. Откройте конкретный автомобиль - должны отображаться детали

## Возможные проблемы:

1. **Изображения не загружаются** - проверьте путь к изображениям в car-api
2. **Данные не отображаются** - проверьте, что car-api возвращает данные в правильном формате
3. **Ошибки CORS** - убедитесь, что car-api настроен для работы с фронтендом
